<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Geo Validator Lab</title>
  <meta name="description" content="A minimal landing page for launching the static visualization with custom settings."/>
  <style>
    :root {
      --bg1: #0f1f1b;
      --bg2: #112926;
      --bg3: #0a1715;
      --fg:  #f3f3ef;
      --muted:#c6cbbf;
      --brand:#f4b267;
      --brand-2:#5fd0c3;
      --paper: rgba(255,255,255,0.08);
      --paper-strong: rgba(255,255,255,0.16);
      --shadow: 0 18px 40px rgba(0,0,0,0.35);
      --radius: 20px;
    }
    html, body {
      height: 100%;
      margin: 0;
      color: var(--fg);
      background: radial-gradient(900px 600px at 15% 15%, rgba(95,208,195,0.22) 0%, transparent 60%),
                  radial-gradient(1000px 700px at 85% 10%, rgba(244,178,103,0.18) 0%, transparent 60%),
                  radial-gradient(1100px 900px at 50% 100%, rgba(63,134,123,0.18) 0%, transparent 60%),
                  linear-gradient(160deg, var(--bg1), var(--bg2) 45%, var(--bg3) 100%);
      font-family: "Plus Jakarta Sans", "Avenir Next", "Segoe UI", sans-serif;
    }
    body::before,
    body::after {
      content: "";
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      opacity: 0.6;
    }
    body::before {
      background:
        linear-gradient(115deg, transparent 0%, rgba(255,255,255,0.05) 45%, transparent 70%),
        repeating-linear-gradient(0deg, rgba(255,255,255,0.04) 0 1px, transparent 1px 5px);
      mix-blend-mode: screen;
    }
    body::after {
      background:
        radial-gradient(450px 300px at 8% 85%, rgba(244,178,103,0.25) 0%, transparent 60%),
        radial-gradient(520px 340px at 92% 70%, rgba(95,208,195,0.2) 0%, transparent 60%);
      filter: blur(1px);
    }
    .wrap {
      position: relative;
      z-index: 1;
      min-height: 100%;
      display: grid;
      grid-template-rows: 1fr auto;
    }
    .container {
      display: grid;
      place-items: center;
      padding: 24px;
    }
    .card {
      width: min(980px, 92vw);
      background: var(--paper);
      border: 1px solid var(--paper-strong);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      padding: 30px;
      position: relative;
      overflow: hidden;
      min-height: 51.8vh;
      animation: rise 0.7s ease both;
    }
    .glow {
      position: absolute;
      inset: -60%;
      background: radial-gradient(650px 420px at 25% 20%, rgba(244,178,103,0.12), transparent 60%),
                  radial-gradient(620px 420px at 80% 35%, rgba(95,208,195,0.14), transparent 60%);
      filter: blur(10px);
      pointer-events: none;
      z-index: 0;
      animation: float 14s ease-in-out infinite alternate;
    }
    @keyframes float {
      0%   { transform: translate3d(0, 0, 0) scale(1); }
      100% { transform: translate3d(0, -12px, 0) scale(1.02); }
    }
    .content {
      position: relative;
      z-index: 1;
    }
    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 10px;
    }
    .brand .logo {
      width: 50px;
      height: 50px;
      border-radius: 12px;
      object-fit: contain;
      background: rgba(255,255,255,0.14);
      border: 1px solid rgba(255,255,255,0.22);
    }
    .eyebrow {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: 999px;
      font-size: 12px;
      letter-spacing: 0.6px;
      text-transform: uppercase;
      color: #101412;
      background: linear-gradient(120deg, rgba(244,178,103,0.9), rgba(95,208,195,0.9));
      box-shadow: 0 6px 18px rgba(0,0,0,0.2);
      margin-bottom: 12px;
    }
    h1 {
      margin: 0;
      font-size: clamp(30px, 4vw, 44px);
      letter-spacing: 0.3px;
      font-family: "Fraunces", "Iowan Old Style", "Palatino Linotype", "Book Antiqua", serif;
    }
    .lead {
      margin: 10px 0 24px 0;
      color: var(--muted);
      font-size: clamp(14px, 1.9vw, 16px);
      line-height: 1.6;
      max-width: 900px;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 14px;
      margin-top: 12px;
      margin-bottom: 8px;
    }
    .item {
      grid-column: span 12;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.14);
      border-radius: 16px;
      padding: 15px;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.08);
      animation: cardIn 0.6s ease both;
    }
    .item:nth-child(1) { animation-delay: 0.05s; }
    .item:nth-child(2) { animation-delay: 0.1s; }
    .item:nth-child(3) { animation-delay: 0.15s; }
    .item:nth-child(4) { animation-delay: 0.2s; }
    .item:nth-child(5) { animation-delay: 0.25s; }
    .item:nth-child(6) { animation-delay: 0.3s; }
    @media (min-width: 720px) {
      .item.sm-6 { grid-column: span 6; }
      .item.sm-4 { grid-column: span 4; }
      .item.sm-3 { grid-column: span 3; }
    }
    .label { display: block; font-weight: 600; margin-bottom: 6px; color: #f7f4ea; }
    select, input[type="number"], input[type="text"] {
      width: 100%; box-sizing: border-box;
      padding: 11px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.22);
      background: rgba(8,14,13,0.45);
      color: var(--fg);
      outline: none;
      transition: border-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease;
    }
    select:focus, input:focus {
      border-color: var(--brand-2);
      box-shadow: 0 0 0 3px rgba(95,208,195,0.25);
      transform: translateY(-1px);
    }
    .row { display: flex; align-items: center; gap: 12px; flex-wrap: wrap; }
    .hint { color: var(--muted); font-size: 12px; margin-top: 6px; }
    .cta {
      display: flex; justify-content: space-between; align-items: center;
      gap: 12px; margin-top: 14px; flex-wrap: wrap;
    }
    .btn {
      border: 0; border-radius: 14px; padding: 12px 20px;
      font-weight: 700; letter-spacing: 0.3px;
      color: #0b1220;
      background: linear-gradient(135deg, var(--brand), var(--brand-2));
      box-shadow: 0 10px 22px rgba(10,20,16,0.4);
      cursor: pointer;
      transition: transform .08s ease, filter .2s ease;
    }
    .dataset-row {
      display: grid;
      grid-template-columns: 1.2fr 1.2fr 1fr;
      gap: 12px;
    }
    .options-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 12px;
    }
    .option-block {
      display: grid;
      gap: 6px;
    }
    .option-block .row {
      gap: 10px;
    }
    @media (max-width: 720px) {
      .options-grid {
        grid-template-columns: 1fr;
      }
    }
    .btn:hover { filter: brightness(1.05); }
    .btn:active { transform: translateY(1px); }
    .link { color: var(--muted); text-decoration: none; border-bottom: 1px solid transparent; }
    .link:hover { color: var(--fg); border-bottom-color: rgba(255,255,255,0.35); }
    footer { color: var(--muted); text-align: center; padding: 18px; font-size: 12px; }
    @keyframes rise {
      from { opacity: 0; transform: translateY(18px) scale(0.98); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }
    @keyframes cardIn {
      from { opacity: 0; transform: translateY(12px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
<div class="wrap">
  <main class="container">
    <section class="card">
      <div class="glow" aria-hidden="true"></div>
      <div class="content">
        <div class="eyebrow">Research demo</div>
        <!-- Brand with icon -->
        <div class="brand">
          <img class="logo" src="assets/logo.jpg" alt="Logo"/>
          <h1>Geographical Decentralization Simulation</h1>
        </div>
        <p class="lead">
This project provides a lightweight interface for the simulations of the geographical decentralization of Ethereum validators that we developed as part of our research.
Our motivation is to better understand the dynamics of validator placement, latency, and performance in decentralized networks. Running such simulations allows us to test different assumptions, compare strategies, and identify where centralization pressures may arise.  

To make these results accessible without requiring users to re-run large experiments, we have  preprocessed several simulation datasets and included them here as interactive demos. By selecting  among these results and adjusting a few viewer options, you can quickly visualize the spatial  distribution of validators, observe the impact of parameters such as density and distance, and  gain an intuition for how validator ecosystems evolve under different conditions.  
        </p>

        <div class="grid">
          <div class="item sm-6">
            <label class="label" for="dataset">Dataset</label>
            <div class="dataset-row">
              <select id="ds-folder">
                <option value="" disabled selected>Dataset</option>
              </select>

              <select id="ds-sub" disabled>
                <option value="" disabled selected>Select a paradigm</option>
              </select>

              <select id="ds-name" disabled>
                <option value="" disabled selected>Cost</option>
              </select>
            </div>

            <!-- This will hold the final relative path you need -->
            <input id="dataset" type="hidden" value="" />
            <div class="hint">Relative path to your preprocessed data file.</div>
          </div>
          <div class="item sm-6">
            <div class="options-grid">
              <div class="option-block">
                <label class="label" for="theme">Theme</label>
                <select id="theme">
                  <option value="auto">Auto</option>
                  <option value="light">Light</option>
                  <option value="dark">Dark</option>
                </select>
              </div>
              <div class="option-block">
                <label class="label" for="step">Step size</label>
                <select id="step">
                  <option value="1">1</option>
                  <option value="10">10</option>
                  <option value="50">50</option>
                </select>
              </div>
              <div class="option-block">
                <div class="label">Autoplay</div>
                <div class="row">
                  <label><input type="radio" name="autoplay" value="on" checked> On</label>
                  <label><input type="radio" name="autoplay" value="off"> Off</label>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="cta">
          <a class="link" href="#" onclick="prefillDemo()">Fill demo values</a>
          <button class="btn" id="launch">Launch Viewer</button>
        </div>
      </div>
    </section>
  </main>
  <footer>
    Static viewer launcher
  </footer>
</div>

<script>
    const DATASETS = {
      "Test": {
        External: ["data"]
      },
      "Baseline": {
        Local: ["cost_0.0", "cost_0.001", "cost_0.002", "cost_0.003"],
        External: ["cost_0.0", "cost_0.001", "cost_0.002", "cost_0.003"]
      },
      "SE1-Information-Source-Placement-Effect": {
        Local: ["latency-aligned", "latency-misaligned"],
        External: ["latency-aligned", "latency-misaligned"]
      },
      "SE2-Validator-Distribution-Effect": {
        Local: ["cost_0.0", "cost_0.002"],
        External: ["cost_0.0", "cost_0.002"]
      },
      "SE3-Joint-Heterogeneity": {
        Local: ["latency-aligned", "latency-misaligned"],
        External: ["latency-aligned", "latency-misaligned"]
      },
      "SE4-Attestation-Threshold": {
        Local: ["gamma_0.3333", "gamma_0.5", "gamma_0.6667", "gamma_0.8"],
        External: ["gamma_0.3333", "gamma_0.5", "gamma_0.6667", "gamma_0.8"]
      },
      "SE4-EIP7782": {
        Local: ["delta_6000_cutoff_3000"],
        External: ["delta_6000_cutoff_3000"]
      }
    };

  const folderSel = document.getElementById("ds-folder");
  const subSel = document.getElementById("ds-sub");
  const nameSel = document.getElementById("ds-name");
  const hiddenPath = document.getElementById("dataset");

  function setOptions(selectEl, items, placeholderText) {
    selectEl.innerHTML = "";
    const ph = document.createElement("option");
    ph.value = "";
    ph.disabled = true;
    ph.selected = true;
    ph.textContent = placeholderText;
    selectEl.appendChild(ph);

    for (const it of items) {
      const opt = document.createElement("option");
      opt.value = it;
      opt.textContent = it;
      selectEl.appendChild(opt);
    }
  }

  // init folder options
  setOptions(folderSel, Object.keys(DATASETS), "Select an evaluation");
  subSel.disabled = true;
  nameSel.disabled = true;

  folderSel.addEventListener("change", () => {
    const folder = folderSel.value;
    const subs = Object.keys(DATASETS[folder] || {});
    setOptions(subSel, subs, "Select a paradigm");
    subSel.disabled = subs.length === 0;
    nameSel.disabled = true;
    hiddenPath.value = "";
  });

  subSel.addEventListener("change", () => {
    const folder = folderSel.value;
    const sub = subSel.value;
    const names = (DATASETS[folder] && DATASETS[folder][sub]) ? DATASETS[folder][sub] : [];
    setOptions(nameSel, names, "Select a simulation result");
    nameSel.disabled = names.length === 0;
    hiddenPath.value = "";
  });

  nameSel.addEventListener("change", () => {
    const folder = folderSel.value;
    const sub = subSel.value;
    const name = nameSel.value;

    hiddenPath.value = `simulations/${folder}/${sub}/${name}/data.json`;
  });

  const TARGET_PAGE = 'viewer.html';
  function prefillDemo() {
    document.getElementById('dataset').value = 'simulations/test/External/data/data.json';
    document.getElementById('theme').value = 'dark';
    document.getElementById('step').value = '10';
    document.querySelector('input[name="autoplay"][value="on"]').checked = true;
  }
  function saveSettings() {
    const settings = {
      dataset: document.getElementById('dataset').value,
      theme:   document.getElementById('theme').value,
      step:    parseInt(document.getElementById('step').value || '1', 10),
      autoplay: document.querySelector('input[name="autoplay"]:checked').value === 'on'
    };
    try { localStorage.setItem('app_settings', JSON.stringify(settings)); } catch (_) {}
    const params = new URLSearchParams(settings);
    window.location.href = `${TARGET_PAGE}?${params.toString()}`;
  }
  document.getElementById('launch').addEventListener('click', saveSettings);
</script>
</body>
</html>
